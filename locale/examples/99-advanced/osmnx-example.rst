
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/99-advanced/osmnx-example.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_examples_99-advanced_osmnx-example.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_99-advanced_osmnx-example.py:


.. _open_street_map_example:

Plot Open Street Map Data
~~~~~~~~~~~~~~~~~~~~~~~~~

This was originally posted to `pyvista/pyvista-support#486 <https://github.com/pyvista/pyvista-support/issues/486>`_.

Be sure to check out `osmnx <https://github.com/gboeing/osmnx>`_

Start by generating a graph from an address.

.. GENERATED FROM PYTHON SOURCE LINES 14-23

.. code-block:: default


    import numpy as np
    import osmnx as ox

    import pyvista as pv

    # Alternatively, use the pickeled graph included in our examples.
    from pyvista import examples








.. GENERATED FROM PYTHON SOURCE LINES 24-25

Read in the graph directly from the Open Street Map server.

.. GENERATED FROM PYTHON SOURCE LINES 25-33

.. code-block:: default


    # address = 'Holzgerlingen DE'
    # graph = ox.graph_from_address(address, dist=500, network_type='drive')
    # pickle.dump(graph, open('/tmp/tmp.p', 'wb'))

    graph = examples.download_osmnx_graph()









.. GENERATED FROM PYTHON SOURCE LINES 34-36

Next, convert the edges into pyvista lines using
:func:`pyvista.lines_from_points`.

.. GENERATED FROM PYTHON SOURCE LINES 36-50

.. code-block:: default


    nodes, edges = ox.graph_to_gdfs(graph)
    lines = []

    # convert each edge into a line
    for _, row in edges.iterrows():
        x_pts = row['geometry'].xy[0]
        y_pts = row['geometry'].xy[1]
        z_pts = np.zeros(len(x_pts))
        pts = np.column_stack((x_pts, y_pts, z_pts))
        line = pv.lines_from_points(pts)
        lines.append(line)









.. GENERATED FROM PYTHON SOURCE LINES 51-52

Finally, merge the lines and plot

.. GENERATED FROM PYTHON SOURCE LINES 52-55

.. code-block:: default


    combined_lines = lines[0].merge(lines[1:])
    combined_lines.plot(line_width=3, cpos='xy')



.. image-sg:: /examples/99-advanced/images/sphx_glr_osmnx-example_001.png
   :alt: osmnx example
   :srcset: /examples/99-advanced/images/sphx_glr_osmnx-example_001.png
   :class: sphx-glr-single-img






.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.846 seconds)


.. _sphx_glr_download_examples_99-advanced_osmnx-example.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: osmnx-example.py <osmnx-example.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: osmnx-example.ipynb <osmnx-example.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
