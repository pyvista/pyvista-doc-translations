<!DOCTYPE html>

<html lang="en" data-content_root="../../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Trame Jupyter Backend for PyVista &#8212; pyvista-doc-translations  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/alabaster.css?v=27fed22d" />
    <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="trame-jupyter-backend-for-pyvista">
<span id="trame-jupyter"></span><h1>Trame Jupyter Backend for PyVista<a class="headerlink" href="#trame-jupyter-backend-for-pyvista" title="Link to this heading">¶</a></h1>
<p>PyVista has the ability to display fully featured plots within a
Jupyter environment using <a class="reference external" href="https://kitware.github.io/trame/index.html">Trame</a>.
We provide mechanisms to pair PyVista and Trame so that PyVista plotters
can be used in a web context with both server and client-side rendering.</p>
<p>The server-side rendering mode of the Trame backend works by streaming the
current render window to a canvas within Jupyter and then passing any user
actions from the canvas back to the VTK render window (this is done under
the hood by the <code class="docutils literal notranslate"><span class="pre">vtkRemoteView</span></code> in <code class="docutils literal notranslate"><span class="pre">trame-vtk</span></code>.</p>
<p>For example, both sections of code will display an interactive canvas
within Jupyter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>

<span class="n">sphere</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Sphere</span><span class="p">()</span>

<span class="c1"># short example</span>
<span class="n">sphere</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">jupyter_backend</span><span class="o">=</span><span class="s1">&#39;trame&#39;</span><span class="p">)</span>

<span class="c1"># long example</span>
<span class="n">plotter</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">jupyter_backend</span><span class="o">=</span><span class="s1">&#39;trame&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For convenience, you can enable <code class="docutils literal notranslate"><span class="pre">trame</span></code> by default with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>

<span class="n">pv</span><span class="o">.</span><span class="n">set_jupyter_backend</span><span class="p">(</span><span class="s1">&#39;trame&#39;</span><span class="p">)</span>
</pre></div>
</div>
<section id="trame-jupyter-modes">
<h2>Trame Jupyter Modes<a class="headerlink" href="#trame-jupyter-modes" title="Link to this heading">¶</a></h2>
<p>The PyVista Trame jupyter backend provides three modes of operation (technically
as three separate backend choices):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'trame'</span></code>: Uses a view that can switch between client- and server-rendering modes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'server'</span></code>: Uses a view that is purely server-rendering.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'client'</span></code>: Uses a view that is purely client-rendering (generally safe without a virtual frame buffer)</p></li>
</ul>
<p>You can choose your backend either by using <code class="xref py py-func docutils literal notranslate"><span class="pre">set_jupyter_backend()</span></code>
or passing <code class="docutils literal notranslate"><span class="pre">jupyter_backend</span></code> on the <code class="xref py py-func docutils literal notranslate"><span class="pre">show()</span></code> call.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>

<span class="n">pv</span><span class="o">.</span><span class="n">set_jupyter_backend</span><span class="p">(</span><span class="s1">&#39;client&#39;</span><span class="p">)</span>

<span class="n">pv</span><span class="o">.</span><span class="n">Cone</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>

<span class="n">pv</span><span class="o">.</span><span class="n">set_jupyter_backend</span><span class="p">(</span><span class="s1">&#39;trame&#39;</span><span class="p">)</span>

<span class="n">pl</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">()</span>
<span class="n">pl</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">pv</span><span class="o">.</span><span class="n">Cone</span><span class="p">())</span>
<span class="n">pl</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">jupyter_backend</span><span class="o">=</span><span class="s1">&#39;client&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>Using pip, you can set up your jupyter environment with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="s1">&#39;jupyterlab&gt;=3&#39;</span><span class="w"> </span>ipywidgets<span class="w"> </span><span class="s1">&#39;pyvista[all,trame]&#39;</span>
</pre></div>
</div>
</section>
<section id="remote-jupyter-host">
<h2>Remote Jupyter Host<a class="headerlink" href="#remote-jupyter-host" title="Link to this heading">¶</a></h2>
<p>When using PyVista in Jupyter that is hosted remotely (docker, cloud JupyterHub,
binder, or otherwise), you will need to pair the Trame backend with either
<code class="docutils literal notranslate"><span class="pre">jupyter-server-proxy</span></code> or <code class="docutils literal notranslate"><span class="pre">trame-jupyter-extension</span></code>.</p>
<section id="jupyter-server-proxy">
<h3>Jupyter Server Proxy<a class="headerlink" href="#jupyter-server-proxy" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://jupyter-server-proxy.readthedocs.io/en/latest/">Jupyter Server Proxy</a>
lets you access the Trame server hosting the views of the PyVista plotters
alongside your notebook, and provide authenticated web access to them directly
through Jupyter.</p>
<p>To configure PyVista and Trame to work with <code class="docutils literal notranslate"><span class="pre">jupyter-server-proxy</span></code> in a remote
environment, you will need to set some options on the global PyVista theme:</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyvista.global_theme.trame.server_proxy_enabled</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyvista.global_theme.trame.server_proxy_prefix</span></code></p></li>
</ul>
<p>The default for <code class="docutils literal notranslate"><span class="pre">server_proxy_prefix</span></code> is <code class="docutils literal notranslate"><span class="pre">'/proxy/'</span></code> and this should be sufficient
for most remote Jupyter environment and use within Docker.</p>
<p>This can also be set with an environment variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PYVISTA_TRAME_SERVER_PROXY_PREFIX</span><span class="o">=</span><span class="s1">&#39;/proxy/&#39;</span>
</pre></div>
</div>
<p>The prefix will need to be modified for JupyterHub deployments.</p>
<p>On MyBinder, the <code class="docutils literal notranslate"><span class="pre">JUPYTERHUB_SERVICE_PREFIX</span></code> string often needs to prefix
<code class="docutils literal notranslate"><span class="pre">'/proxy/'</span></code>. This makes it so the prefix includes the users ID in the URL.
In PyVista, we automatically check for the presence of this variable and
prepend it to the <code class="docutils literal notranslate"><span class="pre">server_proxy_prefix</span></code>.</p>
</section>
<section id="trame-jupyter-extension">
<h3>Trame Jupyter Extension<a class="headerlink" href="#trame-jupyter-extension" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/Kitware/trame-jupyter-extension/">Trame Jupyter Extension</a>
enables the trame server and client to communicate over the existing
<a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/4.x/comms.html">Jupyter Comms</a>
infrastructure, instead of creating a separate WebSocket connection.</p>
<p>Using this extension removes the need for a secondary web server and thus
<code class="docutils literal notranslate"><span class="pre">jupyter-server-proxy</span></code>.</p>
<p>Using pip, you can install the extension:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>trame_jupyter_extension
</pre></div>
</div>
<p>If using Jupyter Lab 3.x, make sure to install the version 1.x of the extension:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;trame_jupyter_extension&lt;2&quot;</span>
</pre></div>
</div>
<p>Once the extension is installed, you can select whether PyVista will use it by
setting the following flag to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyvista.global_theme.trame.jupyter_extension_enabled</span></code></p></li>
</ul>
</section>
<section id="setting-remote-jupyter-host-with-an-environment-variable">
<h3>Setting Remote Jupyter Host with an Environment Variable<a class="headerlink" href="#setting-remote-jupyter-host-with-an-environment-variable" title="Link to this heading">¶</a></h3>
<p>You can set the Remote Jupyter Host manually with the flags discussed above,
but these need to be set every time the Jupyter kernel restarts. In some environments,
it may be more efficient to configure the Remote Jupyter Host with an environment variable.
If set, the value for <code class="docutils literal notranslate"><span class="pre">PYVISTA_TRAME_JUPYTER_MODE</span></code> will determine the values of
these two flags:</p>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyvista.global_theme.trame.server_proxy_enabled</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">pyvista.global_theme.trame.jupyter_extension_enabled</span></code></p></li>
</ul>
<p>If set, the accepted values for <code class="docutils literal notranslate"><span class="pre">PYVISTA_TRAME_JUPYTER_MODE</span></code> include <code class="docutils literal notranslate"><span class="pre">'extension'</span></code>, <code class="docutils literal notranslate"><span class="pre">'proxy'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'native'</span></code>.
The following table shows how each accepted value will affect the two flags, as well as any precondition
that must be true for the value to be applicable. To meet these prerequisites,
review the sections above for installation instructions.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">PYVISTA_TRAME_JUPYTER_MODE</span></code></p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Condition</p></th>
<th class="head"><p><cite>server_proxy_enabled</cite></p></th>
<th class="head"><p><cite>jupyter_extension_enabled</cite></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“extension”</p></td>
<td><p>Use Trame Jupyter Extension</p></td>
<td><p>Extension must be available</p></td>
<td><p>False</p></td>
<td><p>True</p></td>
</tr>
<tr class="row-odd"><td><p>“proxy”</p></td>
<td><p>Use Jupyter Server Proxy</p></td>
<td><p>Proxy must be available</p></td>
<td><p>True</p></td>
<td><p>False</p></td>
</tr>
<tr class="row-even"><td><p>“native”</p></td>
<td><p>Do not use Extension nor Proxy</p></td>
<td><p>None</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="other-considerations">
<h2>Other Considerations<a class="headerlink" href="#other-considerations" title="Link to this heading">¶</a></h2>
<p>It may be worth using GPU acceleration, see <a class="reference internal" href="../../extras/building_vtk.html#gpu-off-screen"><span class="std std-ref">Off-Screen Plotting GPU Support</span></a>.</p>
<p>If you do not have GPU acceleration, alternatively, an offscreen version using OSMesa libraries and <code class="docutils literal notranslate"><span class="pre">vtk-osmesa</span></code> is available:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>uninstall<span class="w"> </span>vtk<span class="w"> </span>-y
pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>--extra-index-url<span class="w"> </span>https://wheels.vtk.org<span class="w"> </span>vtk-osmesa
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../index.html">pyvista-doc-translations</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2021, Tetsuo Koyama.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.0.4</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../../../../_sources/pyvista/doc/source/user-guide/jupyter/trame.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>